!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t=t||self).nvpack=t.nvpack||{},t.nvpack.abtest=e())}(this,function(){"use strict";var t=function(){var t={startStopTimes:{},idleTimeoutMs:3e4,currentIdleTimeMs:0,checkStateRateMs:250,active:!1,idle:!1,currentPageName:"default-page-name",timeElapsedCallbacks:[],userLeftCallbacks:[],userReturnCallbacks:[],trackTimeOnElement:function(e){var n=document.getElementById(e);n&&(n.addEventListener("mouseover",function(){t.startTimer(e)}),n.addEventListener("mousemove",function(){t.startTimer(e)}),n.addEventListener("mouseleave",function(){t.stopTimer(e)}),n.addEventListener("keypress",function(){t.startTimer(e)}),n.addEventListener("focus",function(){t.startTimer(e)}))},getTimeOnElementInSeconds:function(e){var n=t.getTimeOnPageInSeconds(e);return n||0},startTimer:function(e){if(e||(e=t.currentPageName),void 0===t.startStopTimes[e])t.startStopTimes[e]=[];else{var n=t.startStopTimes[e],i=n[n.length-1];if(void 0!==i&&void 0===i.stopTime)return}t.startStopTimes[e].push({startTime:new Date,stopTime:void 0}),t.active=!0},stopAllTimers:function(){for(var e=Object.keys(t.startStopTimes),n=0;n<e.length;n++)t.stopTimer(e[n])},stopTimer:function(e){e||(e=t.currentPageName);var n=t.startStopTimes[e];void 0!==n&&0!==n.length&&(void 0===n[n.length-1].stopTime&&(n[n.length-1].stopTime=new Date),t.active=!1)},getTimeOnCurrentPageInSeconds:function(){return t.getTimeOnPageInSeconds(t.currentPageName)},getTimeOnPageInSeconds:function(e){return void 0===t.getTimeOnPageInMilliseconds(e)?void 0:t.getTimeOnPageInMilliseconds(e)/1e3},getTimeOnCurrentPageInMilliseconds:function(){return t.getTimeOnPageInMilliseconds(t.currentPageName)},getTimeOnPageInMilliseconds:function(e){var n=t.startStopTimes[e];if(void 0!==n){for(var i=0,o=0;o<n.length;o++){var r=n[o].startTime,a=n[o].stopTime;void 0===a&&(a=new Date),i+=a-r}return Number(i)}},getTimeOnAllPagesInSeconds:function(){for(var e=[],n=Object.keys(t.startStopTimes),i=0;i<n.length;i++){var o=n[i],r=t.getTimeOnPageInSeconds(o);e.push({pageName:o,timeOnPage:r})}return e},setIdleDurationInSeconds:function(e){var n=parseFloat(e);if(!1!==isNaN(n))throw{name:"InvalidDurationException",message:"An invalid duration time ("+e+") was provided."};return t.idleTimeoutMs=1e3*e,this},setCurrentPageName:function(e){return t.currentPageName=e,this},resetRecordedPageTime:function(e){delete t.startStopTimes[e]},resetAllRecordedPageTimes:function(){for(var e=Object.keys(t.startStopTimes),n=0;n<e.length;n++)t.resetRecordedPageTime(e[n])},resetIdleCountdown:function(){t.idle&&t.triggerUserHasReturned(),t.idle=!1,t.currentIdleTimeMs=0},callWhenUserLeaves:function(t,e){this.userLeftCallbacks.push({callback:t,numberOfTimesToInvoke:e})},callWhenUserReturns:function(t,e){this.userReturnCallbacks.push({callback:t,numberOfTimesToInvoke:e})},triggerUserHasReturned:function(){if(!t.active)for(var e=0;e<this.userReturnCallbacks.length;e++){var n=this.userReturnCallbacks[e],i=n.numberOfTimesToInvoke;(isNaN(i)||void 0===i||i>0)&&(n.numberOfTimesToInvoke-=1,n.callback())}t.startTimer()},triggerUserHasLeftPage:function(){if(t.active)for(var e=0;e<this.userLeftCallbacks.length;e++){var n=this.userLeftCallbacks[e],i=n.numberOfTimesToInvoke;(isNaN(i)||void 0===i||i>0)&&(n.numberOfTimesToInvoke-=1,n.callback())}t.stopAllTimers()},callAfterTimeElapsedInSeconds:function(e,n){t.timeElapsedCallbacks.push({timeInSeconds:e,callback:n,pending:!0})},checkState:function(){for(var e=0;e<t.timeElapsedCallbacks.length;e++)t.timeElapsedCallbacks[e].pending&&t.getTimeOnCurrentPageInSeconds()>t.timeElapsedCallbacks[e].timeInSeconds&&(t.timeElapsedCallbacks[e].callback(),t.timeElapsedCallbacks[e].pending=!1);!1===t.idle&&t.currentIdleTimeMs>t.idleTimeoutMs?(t.idle=!0,t.triggerUserHasLeftPage()):t.currentIdleTimeMs+=t.checkStateRateMs},visibilityChangeEventName:void 0,hiddenPropName:void 0,listenForVisibilityEvents:function(){void 0!==document.hidden?(t.hiddenPropName="hidden",t.visibilityChangeEventName="visibilitychange"):void 0!==document.mozHidden?(t.hiddenPropName="mozHidden",t.visibilityChangeEventName="mozvisibilitychange"):void 0!==document.msHidden?(t.hiddenPropName="msHidden",t.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden&&(t.hiddenPropName="webkitHidden",t.visibilityChangeEventName="webkitvisibilitychange"),document.addEventListener(t.visibilityChangeEventName,function(){document[t.hiddenPropName]?t.triggerUserHasLeftPage():t.triggerUserHasReturned()},!1),window.addEventListener("blur",function(){t.triggerUserHasLeftPage()}),window.addEventListener("focus",function(){t.triggerUserHasReturned()}),document.addEventListener("mousemove",function(){t.resetIdleCountdown()}),document.addEventListener("keyup",function(){t.resetIdleCountdown()}),document.addEventListener("touchstart",function(){t.resetIdleCountdown()}),window.addEventListener("scroll",function(){t.resetIdleCountdown()}),setInterval(function(){t.checkState()},t.checkStateRateMs)},websocket:void 0,websocketHost:void 0,setUpWebsocket:function(e){if(window.WebSocket&&e){var n=e.websocketHost;try{t.websocket=new WebSocket(n),window.onbeforeunload=function(n){t.sendCurrentTime(e.appId)},t.websocket.onopen=function(){t.sendInitWsRequest(e.appId)},t.websocket.onerror=function(t){console&&console.log("Error occurred in websocket connection: "+t)},t.websocket.onmessage=function(t){console&&console.log(t.data)}}catch(t){console&&console.error("Failed to connect to websocket host.  Error:"+t)}}return this},websocketSend:function(e){t.websocket.send(JSON.stringify(e))},sendCurrentTime:function(e){var n={type:"INSERT_TIME",appId:e,timeOnPageMs:t.getTimeOnCurrentPageInMilliseconds(),pageName:t.currentPageName};t.websocketSend(n)},sendInitWsRequest:function(e){var n={type:"INIT",appId:e};t.websocketSend(n)},initialize:function(e){var n=t.idleTimeoutMs||30,i=t.currentPageName||"default-page-name",o=void 0;e&&(n=e.idleTimeoutInSeconds||n,i=e.currentPageName||i,o=e.websocketOptions),t.setIdleDurationInSeconds(n).setCurrentPageName(i).setUpWebsocket(o).listenForVisibilityEvents(),t.startTimer()}};return t}();class e{constructor(){this.document=window.document}set(t,e,n,i){var o=new Date((new Date).setHours(23,59,59,0));n=n||0==n?"expires="+n:"expires="+o,i=i?"domain=."+i:"",document.cookie=t+"="+e+"; "+n+"; "+i+"; path=/"}get(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){var o=n[i].trim();if(0==o.indexOf(e))return o.substring(e.length,o.length)}return null}remove(t){document.cookie=t+"=; Max-Age=-99999999;"}lsSupport(){return!!window.localStorage}setLS(t,e){return this.lsSupport()&&localStorage.setItem(t,e)}getLS(t){return this.lsSupport()?localStorage.getItem(t):null}duration(t){var e=1,n="Fri, 31 Dec 1999 23:59:59 GMT";if(t)if(501==t)n="Fri, 31 Dec 1999 23:59:59 GMT";else if(0==t)n=0;else{500==t?e=365:t>0&&t<=90&&(e=t);var i=new Date;1!=e&&(e-=1,i.setTime(i.getTime()+24*e*60*60*1e3)),i.setHours(23,59,59,0),n=i}return n}}var n,i,o,r,a="https://heatmaps.notifyvisitors.com/",s="https://heatcron1.notifyvisitors.com/",c="notify_visitors",d={urls:{heatmapSettings:a+"brand/t1/hs",heatmapData:a+"brand/t2/heatmapData",heatmapData_new:a+"brand/t2_new/heatmapData",heatmapUrl:a,heatcronUrl:s,socketPath:"/socket/socket.io",contentUrl:a+"endapi/content/data",contentUrlHeat:s+"endapi/content/data",hmContentUrl:a+"endapi/hmContent/data",awsWebSocketUrl:"wss://wsshm.notifyvisitors.com"},js_urls:{hm:a+"js/heatmap/hm_paint.js",ab:"https://optimiser.notifyvisitors.com/js/abTest/bootEditor.js",socket:"https://cdn.notifyvisitors.com/ext/external/socket.js"}},u=(window[c].Optimize.data,(t,e,n)=>{if(e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&"),n)t=t.toLowerCase(),e=e.toLowerCase();var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}),f=(t,e)=>{if(!t)throw new Error('this function need "query" to work');if("string"==typeof t)return u(t,e);if("object"==typeof t){var n=!0;return Object.keys(t).forEach(function(i){i&&"string"==typeof i&&(n=u(i,e)===t[i])}),n}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e="AB_TEST";switch(t){case"0":e="AB_TEST";break;case"1":e="SPLIT_TEST";break;case"3":e="PERSONALIZATION_TEST"}return e},h=t=>{"string"==typeof t&&(t=JSON.parse(t));var e,n=t.nodeType;switch(n){case 1:e=document.createElement(t.tagName);for(var i=t.attributes||[],o=0,r=i.length;o<r;o++){var a=i[o];e.setAttribute(a[0],a[1])}break;case 3:e=document.createTextNode(t.nodeValue);break;case 8:e=document.createComment(t.nodeValue);break;case 9:e=document.implementation.createDocument();break;case 10:e=document.implementation.createDocumentType(t.nodeName);break;case 11:e=document.createDocumentFragment();break;default:return e}if(1==n||11==n){var s=t.childNodes||[];for(o=0,r=s.length;o<r;o++)e.appendChild(h(s[o]))}return e},l=t=>{for(var e=0;e<t.length;e++)t[e].setAttribute("ab-key",e)},m=(t,e)=>{for(var n=0,i=0;i<e.length;i++){var o=e[i].getAttribute("ab-key");parseInt(t)===parseInt(o)&&(n=i)}return e[n]},w=t=>{var e=t,n=e.children;null!=n[0].getAttribute("ab-key")&&void 0!==n[0].getAttribute("ab-key")||l(n);for(var i=0;i<n.length;i++)e.insertBefore(m(parseInt(i),n),n[i]);n.length&&e.insertBefore(m(0,n),n[0])},g=(t,e)=>{var n=t,i=n.children;l(i);for(var o=e,r=0;r<o.length;r++)void 0===o[r]||n.insertBefore(m(parseInt(o[r]),i),i[r])},p=(t,e)=>{if(t!=e){var n=null,i=(e=(e.match(/\S+/g)||[]).join(" ")).split(" ").splice(0,e.split(" ").length-2).join(" "),o=document.querySelector(i);if(2==e.split(":").length?e.split(":")[1].split(" ").length>2||(n=e.split(":")[1].split("(")[1].split(")")[0]):e.split(":")[e.split(":").length-1]&&1!=e.split(":").length&&(n=e.split(":")[e.split(":").length-1].split("(")[1].split(")")[0]),null==n)o.appendChild(document.querySelector(t));else{var r={},a=!1,s=(t.match(/\S+/g)||[]).join(">");try{r=document.querySelector(s)}catch(t){a=!0}a&&(r=document.querySelector(t)),o.insertBefore(r,o.children[n-1])}}},b=t=>{for(var e="",n=window.location.href.split("?"),i=n[n.length-1].split("&"),o=0;o<i.length;o++)-1!=i[o].indexOf(t)&&(e=i[o].split("=")[1]);var r=[];for(o=0;o<i.length;o++)-1==i[o].indexOf(t)&&r.push(i[o]);return""!=r.join("&")?n[n.length-1]=r.join("&"):n.pop(),n=n.join("?"),window.history.replaceState(null,null,n),e},y=t=>{var e,n,i,o;return o=t%1e3,i=Math.floor(t/1e3),n=Math.floor(i/60),i%=60,e=Math.floor(n/60),n%=60,{d:Math.floor(e/24),h:e%=24,m:n,s:i,ms:o}},_=t=>864e5*t.d+36e5*t.h+6e4*t.m+1e3*t.s+t.ms,T=t=>{var e=document.getElementById(t||"_nv_hm_hidden_element");null!=e&&(window[c].Optimize.data&&window[c].Optimize.data.details&&window[c].Optimize.data.details.isIE?e.parentNode.removeChild(e):e.remove())},k=t=>{var e={abTest:!1,split:!1};if(t.hasOwnProperty("abTest")&&t.abTest&&"object"==typeof t.abTest)for(var n=0;n<Object.keys(t.abTest).length;n++){var i=t.abTest[n];if("object"==typeof i)if(i.hasOwnProperty("visitorData")&&i.visitorData&&"object"==typeof i.visitorData&&(window[c].Optimize.data.abTest[n].visitorData=i.visitorData),i.campDetail&&"1"==i.campDetail.type){if(e.split=!0,t.abTest.split=n,!i.campDetail.variationIDs.includes("1")){e.abTest=!1;break}}else e.abTest=!0}return e},O=(t,e,n)=>{var i=window.getComputedStyle(t).getPropertyValue(e);return(i="string"==typeof i?i:"").replace(/ /g,"")!==n.replace(/ /g,"")&&(t.style.removeProperty?t.style.removeProperty(e):t.style.removeAttribute(e),t.getAttribute("style")+"".concat(e,":").concat(n," !important; "))},S=(t,e)=>{var n=null,i=t.substring(0,t.indexOf(">")),o="div";switch(i=i.includes(" ")?t.substring(0,t.indexOf(" ")):i){case"<td":case"<th":o="tr";break;case"<tr":o="tbody";break;case"<tbody":o="table";break;default:o="div"}var r=document.createElement(o);return r.classList.add("myClass"),r.innerHTML=t.trim(),e&&(n=r),n||r.firstChild},I=()=>{var t,e=!0,n={},i=!1;function o(t){i=!0,clearInterval(t),e&&setTimeout(function(){r("selfCall")},10)}function r(t,i,o,a,s){t&&(void 0===s&&(s=!0),e&&("function"==typeof ga?"selfCall"===t?Object.keys(n).forEach(function(t){if(t&&n[t]&&n[t].length>0){for(var e=0;e<n[t].length;e++)ga(t+".send","event",n[t][e][1],n[t][e][2],n[t][e][3],1,{nonInteraction:n[t][e][4]});n[t]=[]}}):ga(t+".send","event",i,o,a,1,{nonInteraction:s}):"selfCall"!==t?(n[t]||(n[t]=[]),n[t].push([t,i,o,a,s])):setTimeout(function(){r("selfCall")},100)))}return{send:r,create:function r(a,s){if(a)if("undefined"!=typeof ga&&ga.loaded&&"function"==typeof ga)try{if(s)ga("create",s,"auto",{name:a});else if(ga.getAll&&Array.isArray(ga.getAll())&&ga.getAll().length>0){var c=ga.getAll()[0].get("trackingId"),d=ga.getByName(a);c&&!d&&(ga("create",c,"auto",{name:a}),o(t))}}catch(t){}else i||t||(t=setInterval(function(){r(a)},250),setTimeout(function(){t&&(e=!1,n={},o(t))},6e4))}}},j=I(),A=window[c].Optimize.data,N=(n={campDetails:{},goalNames:{},goalConverts:{},2:function(t,e,i,o){return new Promise(function(r,a){var s=document.querySelector(t);s&&(s.setAttribute("nvAbGoal_"+i+"_"+o,e),s.addEventListener("click",n.clickGoalHandler,!0)),r(!0)})},3:function(){return new Promise(function(t,e){t(!0)})},clickGoalHandler:function(t){var e=(t=>{var e={};if(!t.hasAttributes())return e;for(var n of t.attributes)n.name.startsWith("nvabgoal")&&(e[n.name]=n.value);return e})(t.currentTarget);e&&Object.values(e).forEach(function(t,e){var i=n.goalConverts[t];n.goalConverts[i]?(n.goalConverts[i][t]=1,n.updateIntoGa(t)):(n.goalConverts[i]={},n.goalConverts[i][t]=1,n.updateIntoGa(t))})},updateIntoGa:function(t){var e=n.goalNames[t],i=n.campDetails[t].varIDs,o=n.goalConverts[t];o&&Array.isArray(i)&&i.length>0&&i.forEach(function(i){A.gaEvents&&Array.isArray(A.gaEvents.events)&&A.gaEvents.events.includes("ab_goal_conversion")&&j.send("NV_AB_Test","NotifyVisitors_AB_Test","".concat(n.campDetails[t].nvTest,"_").concat(o,"_").concat(i),e,!1)})}},{init:function(t,e,i){var o,r,a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o=document,r=window,a=function(){!function(t){return!(!t||!Array.isArray(t))}(t)?console.log("invalid config obj"):t.forEach(function(t,o){"1"!==t.type&&(n[t.type](t.content,t.id,e,o),n.goalConverts[t.id]=e,n.goalNames[t.id]=t.name,n.campDetails[t.id]={},n.campDetails[t.id].varIDs=Array.isArray(i)?i:"",n.campDetails[t.id].nvTest=s.nvTest)})},"complete"==o.readyState?a():r.addEventListener?r.addEventListener("load",a,!1):r.attachEvent&&r.attachEvent("onload",a)},goalConverts:function(t){return n.goalConverts[t]}});r||(r=new class{constructor(){this.oDomain="",this._CookieController=new e,this.windowObjName=window[c].Optimize.data,this.nvGoals=N,this.loadListner=this.loadListner.bind(this),this.getAbData=this.getAbData.bind(this),this.saveData=this.saveData.bind(this),this.makeXMLRequest=this.makeXMLRequest.bind(this),this.sendUsingBeacon=this.sendUsingBeacon.bind(this),this.timeOnSite=this.timeOnSite.bind(this)}loadListner(){i=new Date,t.initialize({currentPageName:location.href,idleTimeoutInSeconds:10}),t.getTimeOnCurrentPageInSeconds()}getStartTime(){return i}getAbData(){if(this.windowObjName.abTest&&"object"==typeof this.windowObjName.abTest){var t={},e=this,n=this.windowObjName.abTest;return Object.keys(n).forEach(function(i,o){"object"==typeof n[o]&&n[o].cid&&n[o].vid&&(t[o]={vid:n[o].vid,cid:n[o].cid,device:n[o].campDetail&&n[o].campDetail.device?n[o].campDetail.device:"",userAgent_v1:n[o].campDetail&&n[o].campDetail.userAgent_v1?n[o].campDetail.userAgent_v1:"",gc:e.nvGoals.goalConverts(n[o].cid)},n[o].visitorData&&(t[o].vd=n[o].visitorData))}),t}return 0}saveData(e){o=new Date;var n=document.body,r=document.documentElement,a=n?Math.max(n.scrollHeight,n.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight):0,s={brandID:this.windowObjName.auth.bid,domain:e&&e.oDomain?e.oDomain:this.windowObjName.domain,path:e&&e.url?e.url.pathname:location.pathname,hash:e&&e.url?e.url.hash:location.hash,routingType:e&&e.routeType?e.routeType:notify_visitors.routingType?notify_visitors.routingType:"",activeTime:Math.abs(t.getTimeOnCurrentPageInSeconds()).toFixed(3),timeOnPage:Math.abs((o-i)/1e3).toFixed(3),pageheight:e&&e.height?e.height:a,pagewidth:document.body.clientWidth,resolution:window.screen.width+"x"+window.screen.height,linkReferrer:document.referrer,pageUrl:e&&e.url?e.url.href:window.location.href,abTest:this.getAbData()};window.navigator.sendBeacon?this.sendUsingBeacon(s):this.makeXMLRequest(s)}makeXMLRequest(t){var e=new XMLHttpRequest;e.onreadystatechange=function(t){},e.open("POST",d.urls.heatmapData,!1),e.setRequestHeader("Content-Type","text/plain"),e.send(JSON.stringify(t)),console.log("xml request")}sendUsingBeacon(t){var e=d.urls.heatmapData;t&&t.brandID&&"7342"==t.brandID&&(e=d.urls.heatmapData_new),window.navigator.sendBeacon(e,JSON.stringify(t))}timeOnSite(){window.addEventListener("unload",function(t,e){var n=new Date,i=Math.abs(n-e),o=t._CookieController.get("_nv_ttsOnpage_"+t.windowObjName.auth.bid);o="string"==typeof o&&o.length>0?_(JSON.parse(o)):0;var r=new Date;r.setTime(r.getTime()+2592e6);var a=r.toUTCString();t._CookieController.set("_nv_ttsOnpage_"+t.windowObjName.auth.bid,JSON.stringify(y(o+i)),a)}.bind(null,this,i),!1)}});var E=r,C={},P=I(),D=function(){var t=window[c].Optimize.data,e=t.gaEvents&&t.gaEvents.trackingID?t.gaEvents.trackingID:"";function n(t){for(var e=[/\@\{(.+?)\}\@/g,/\@\[(.+?)\]\@/g,/\[\[(.+?)\]\]/g],n=0;n<e.length;n++)if(t.match(e[n]))return null;return t}return{init:function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};P.create("NV_AB_Test",e),i.forEach(function(e){if(t.gaEvents&&Array.isArray(t.gaEvents.events)&&t.gaEvents.events.includes("ab_variation_applied")&&P.send("NV_AB_Test","NotifyVisitors_AB_Test","".concat(o.nvTest,"_").concat(o.campaignID,"_").concat(e.variationID),"Variation Shown",!0),e.content){C[e.variationID]=!0;var i=JSON.parse(e.content);if(i&&"object"==typeof i){var r=Object.assign({},i);setTimeout(function(){C[e.variationID]=!1},6e4),function t(e,i){Object.keys(e).forEach(function(t){var i,o,r=document.querySelector(t);r&&(i=t,(o=e[t])&&"object"==typeof o&&Object.keys(o).forEach(function(t){var e,r=document.querySelector(i);if(r){if("styleChange"===t){var a=o[t].changes?o[t].changes:o[t];Object.keys(a).forEach(function(t){var e=void 0!==r.style[t]?n(a[t]):"";if(e){r.style[t]=e;var i=O(r,t,e);i&&r.setAttribute("style",i)}}),o[t].changes&&Object.keys(o[t].changes).forEach(e=>{var i=!1,a=void 0!==e?e.split("_"):"";2===a.length&&(a[1]=Number(a[1]),i="a"===a[0]?window.innerWidth>=a[1]:!!a[1]&&window.innerWidth<=a[1]),i&&Object.keys(o[t].changes[e]).forEach(function(i){var a=void 0!==r.style[i]?n(o[t].changes[e][i]):"";if(a){r.style[i]=a;var s=O(r,i,a);s&&r.setAttribute("style",s)}})})}if("textChange"===t){var s=n(o[t]);s&&(r.innerText=s)}if("imageChange"===t&&Object.keys(o[t]).forEach(function(e){var i=n(o[t][e]);i&&r.setAttribute(e,i)}),"changePosition"===t&&(o[t].resoChanges?(r.style.transform=o[t].resoChanges.normal?o[t].resoChanges.normal:o[t].changes,Object.keys(o[t].resoChanges).forEach(e=>{var n=!1,i=void 0!==e?e.split("_"):"";2===i.length&&(i[1]=Number(i[1]),n="a"===i[0]?window.innerWidth>=i[1]:!!i[1]&&window.innerWidth<=i[1]),n&&(r.style.transform=o[t].resoChanges[e])})):r.style.transform=o[t].changes),"displayChanges"===t){var c=Object.keys(o[t])[0];r.setAttribute(c,o[t][c]),r.style.visibility="hidden"}if("pasteElement"===t){var d=o[t];if(d&&"object"==typeof d&&d.insertType&&d.insertType.includes("Insert")){var u=d.insertType.split("::")[1];u&&d.newTargetEl&&("Before"===u?r.parentNode.insertBefore(h(d.newTargetEl),r):"After"===u&&r.parentNode.insertBefore(h(d.newTargetEl),r.nextSibling))}}if("textNodeChange"===t&&Object.keys(o[t]).forEach(function(e){var n=parseInt(e);Array.prototype.forEach.call(r.childNodes,function(e,i){i===n&&(e.nodeValue=o[t][n])})}),"linkChange"===t){var s=n(o[t]);s&&r.setAttribute("href",s)}if("sortable"===t&&(w(r),g(r,o[t])),"reArrange"===t&&p(o[t].old,o[t].new),"HTMLChanges"===t){var s=n(o[t].trim());s&&(r.parentNode.insertBefore(S(s).cloneNode(!0),r.nextSibling),r.parentNode.removeChild(r))}if("addHTMLBefore"===t){var s=n(o[t].trim());if(s){var f=S(s,!0),v=Object.values(f.childNodes);v.forEach(function(t,e){r.parentNode.insertBefore(t,r)})}}if("addHTMLAfter"===t){var s=n(o[t].trim());if(s){var f=S(s,!0),v=Object.values(f.childNodes);v.forEach(function(t,e){r.parentNode.insertBefore(t,r.nextSibling)})}}if("addScript"===t){var s=n(o[t].jsCode);s&&(e=r,new Function("element",s)(e))}}}),delete e[t])}),Object.keys(e).length>0&&C[i]?setTimeout(()=>{t(e,i)},100):C[i]=!1}(r,e.variationID)}}})}}}(),M=function(){var t=window[c].Optimize.data,e=null,n={};function i(){e&&window.clearInterval(e);var i=document.createElement("a");document.body.appendChild(i),i.setAttribute("type","hidden"),i.setAttribute("rel","nofollow"),i.href=function(e){e=(e=(n=e,i=new URL(window.location),n=new URL(n),i.searchParams.forEach((t,e)=>{n.searchParams.has(e)||n.searchParams.append(e,t)}),n).href).split("?").length<=1?e+"?_s_cid="+t.abTest[t.abTest.split].cid+"&_s_vid="+t.abTest[t.abTest.split].vid:e+"&_s_cid="+t.abTest[t.abTest.split].cid+"&_s_vid="+t.abTest[t.abTest.split].vid;var n,i;return e}(n.variation.content),i.click(),t.isIE?i.parentNode.removeChild(i):i.remove()}return{init:function(t){var o,r,a,s;(n=t).campDetail.status&&n.variation&&n.variation.content&&(o="_nv_hm_hidden_element_split",r=document.createElement("style"),a="body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}",s=document.getElementsByTagName("head")[0],r.setAttribute("id",o),r.setAttribute("type","text/css"),r.styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a)),s&&s.appendChild(r),setTimeout(function(){T(o)},1e4),document.body?i():e=window.setInterval(()=>{document.body&&i()},100))}}}();class x{constructor(){this.document=window.document,this.browserStatus={isSafari:0,isChrome:0,isFirefox:0,isIE:0,isSafariPush:0,isChromePush:0,isFirefoxPush:0,isEdgePush:0},this.isIncognito=0}getMobileStatus(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?1:0}getBrowser(){var t,e=window.navigator.userAgent;if(document.documentMode||/Edge/.test(e)||/EdgA/.test(e)||/Edg/.test(e))this.browserStatus.isIE=1,t=/Edge/.test(e)||/EdgA/.test(e)?e.substring(e.indexOf("Edg")+5).substring(0,2):e.substring(e.indexOf("Edg")+4).substring(0,2),this.browserStatus.isEdgePush=t>=17?1:0;else if(/chrome/i.test(e))this.browserStatus.isChrome=1,t=/Android|webOS/i.test(navigator.userAgent)?e.split("/")[e.split("/").length-2]:e.split(" ")[e.split(" ").length-2].substr(7),this.browserStatus.isChromePush=t.substring(0,2)>=42?1:0;else if(e.indexOf("Safari")>0&&-1==e.indexOf("Chrome"))this.browserStatus.isSafari=1,t=e.substring(0,e.indexOf("Safari")).substring(e.substring(0,e.indexOf("Safari")).lastIndexOf("/")+1),this.browserStatus.isSafariPush=parseInt(t,10)>=7?1:0;else if(/firefox/i.test(e)){this.browserStatus.isFirefox=1;var n=e.indexOf("Firefox"),i=e.substring(n+8),o=parseInt(""+i,10);o=isNaN(o)?parseInt(navigator.appVersion,10):o,this.browserStatus.isFirefoxPush=o>=44&&!/Android|webOS/i.test(navigator.userAgent)||o>=48&&/Android|webOS/i.test(navigator.userAgent)?1:0}return this.browserStatus}checkIncognito(){return new Promise((t,e)=>{this.isIncognito=0;var n=this,i=window.navigator.userAgent;if(document.documentMode||/Edge/.test(i))window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?t(!1):(n.isIncognito=1,t(!0));else if(/chrome/i.test(i)){var o=window.RequestFileSystem||window.webkitRequestFileSystem;o?o(window.TEMPORARY,100,()=>t(!1),()=>{n.isIncognito=1,t(!0)}):(n.isIncognito=1,t(!0))}else if(/firefox/i.test(i)){if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var r,a;try{(r=window.indexedDB.open("test")).onerror=function(){return!0}}catch(e){a=!0,n.isIncognito=1,t(!0)}void 0===a&&function(t,e){var n=0,i=!1,o=window.setInterval(function(){t()&&(window.clearInterval(o),e(i)),n++>50&&(window.clearInterval(o),e(i=!0))},10)}(function(){return"done"===r.readyState},function(e){e||(!0===(a=!r.result)?(n.isIncognito=1,t(!0)):t(!1))})}}else if(/Safari/.test(i)){var s;try{window.openDatabase(null,null,null,null)}catch(e){"QuotaExceededError"===e.name?n.isIncognito=0:n.isIncognito=1,s=!0,t(!0)}void 0===s&&(s=!1,n.isIncognito=0,t(!1))}setTimeout(function(){t(!1)},1e3)})}getQueryValue(t){for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var i=e[n].split("=");if(i[0]==t)return i[1]}}}var R=document.body,U=document.documentElement,L={},B={};class H{constructor(t,n){this._resData=t,this._windowObj=n[c].Optimize.data,this._nvAbTest=D,this._nvGoals=N,this._nvSplitUrl=M,this._getdata=E,this.handleResponse=this.handleResponse.bind(this),this.handledatatosend=this.handledatatosend.bind(this),this.bodyloadHandler=this.bodyloadHandler.bind(this),this.reinitalizeGoal=this.reinitalizeGoal.bind(this),this._CookieController=new e,this._BrowserController=new x}handleResponse(){if("fail"==this._resData.Authentication)return!1;this._BrowserController.getBrowser(),window[c].Optimize.data&&(window[c].Optimize.data.details=this._BrowserController.browserStatus),this._getdata.loadListner(),this._getdata.timeOnSite(),this._windowObj.cookie_path=window.location.pathname;var t=k(this._resData);if(t.abTest||t.split){L.thispage=Object.assign({},window.location),window.addEventListener("unload",this._getdata.saveData,!1),L.oDomain=this._getdata.windowObjName.domain,L.routeType=notify_visitors.routingType?notify_visitors.routingType:"",L.nv_auth=notify_visitors.auth,R=document.body,U=document.documentElement;var e=R?Math.max(R.scrollHeight,R.offsetHeight):0,n=U?Math.max(U.clientHeight,U.scrollHeight,U.offsetHeight):0;L.height=e||n?Math.max(n,e):0}if(t.split){var i=!0;window[c].ab_overlay&&(i=!!document.querySelector("#_nv_hm_hidden_element"));var o=this._resData.abTest.split,r=this._resData.abTest[o];if(i&&(r.campDetail.hasOwnProperty("splitRedirection")?(this._windowObj.abTest[o].cid=b("_s_cid"),this._windowObj.abTest[o].vid=[b("_s_vid")],this._windowObj.abTest[o].c_e_ts=r.campDetail.e_ts):r.hasOwnProperty("variation")&&Array.isArray(r.variation)&&r.variation.length>0&&(this._windowObj.abTest[o].cid=r.campDetail.campaignID,this._windowObj.abTest[o].vid=r.campDetail.variationIDs,r.variation=r.variation[0],this._nvSplitUrl.init(r)),r.hasOwnProperty("goals")&&r.goals&&"object"==typeof r.goals)){var a={campaignID:this._windowObj.abTest[o].campDetail.campaignID?this._windowObj.abTest[o].campDetail.campaignID:"",nvTest:this._windowObj.abTest[o].campDetail.type?v(this._windowObj.abTest[o].campDetail.type):""};this._nvGoals.init(r.goals,this._windowObj.abTest[o].cid,this._windowObj.abTest[o].vid,a)}}if(t.abTest){var s=this._resData.abTest,d=this;Object.keys(this._resData.abTest).forEach(function(t,e){"object"==typeof s[t]&&d.abTest(s[t],e)})}setTimeout(function(){T()},200)}abTest(t,e){var n,i=(t.campDetail?t.campDetail.e_ts:0)||0;i=1e3*i>=(new Date).getTime()?1e3*i:(new Date).getTime()+864e5;var o=this._CookieController.get("_nv_ab_app_"+this._windowObj.auth.bid+"_"+t.campDetail.campaignID)||0;n="0"==t.campDetail.type;var r=window[c].ab_overlay,a=!!f("nv_preview",document.location.href),s=!!document.querySelector("#_nv_hm_hidden_element");if(n&&r&&(1==o||s)||n&&!r||a||!n){var d=t;if(d.hasOwnProperty("variation")&&d.variation&&Array.isArray(d.variation)){this._CookieController.set("_nv_ab_app_"+this._windowObj.auth.bid+"_"+d.campDetail.campaignID,"1",new Date(i).toGMTString()),this._windowObj.abTest[e].cid=d.campDetail.campaignID,this._windowObj.abTest[e].vid=d.campDetail.variationIDs,this._windowObj.abTest[e].c_e_ts=d.campDetail.e_ts;var u={campaignID:d.campDetail&&d.campDetail.campaignID?t.campDetail.campaignID:"",nvTest:d.campDetail&&t.campDetail.type?v(t.campDetail.type):""};if(document.body)this._nvAbTest.init(t.variation,u);else{var h=d.campDetail.campaignID+"_"+d.campDetail.variationIDs;B[h]=window.setInterval(function(){this.bodyloadHandler(t.variation,h,u)}.bind(this),100)}}d.hasOwnProperty("goals")&&d.goals&&"object"==typeof d.goals&&this._nvGoals.init(d.goals,this._windowObj.abTest[e].cid,this._windowObj.abTest[e].vid,u)}}handledatatosend(){var t={url:L.thispage,height:L.height,oDomain:L.oDomain,routeType:L.routeType};E.saveData(t)}bodyloadHandler(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";document.body&&(B[e]&&(B[e]=clearInterval(B[e])),this._nvAbTest.init(t,n))}reinitalizeGoal(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";t&&"object"==typeof t&&e&&n&&this._nvGoals.init(t,e,n,i)}}var F=new H(window[c].Optimize.data,window);return F.handleResponse(),H.reinitalizeGoal=F.reinitalizeGoal,H});
