(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{471:function(e,t,r){},478:function(e,t,r){"use strict";r(471)},515:function(e,t,r){"use strict";r.r(t);r(27),r(110),r(38),r(15);var o=r(5);function n(){return(n=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e}).apply(this,arguments)}var c=Object.prototype.hasOwnProperty;var l,d,m,h=(l=!1,d=[],m={resolved:function(){return l},resolve:function(e){if(!l){l=!0;for(var i=0,t=d.length;i<t;i++)d[i](e)}},promise:{then:function(e){l?e():d.push(e)}}},{notify:function(){m.resolve()},wait:function(){return m.promise},render:function(e,t,r){this.wait().then((function(){r(window.grecaptcha.render(e,t))}))},reset:function(e){void 0!==e&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.reset(e)})))},execute:function(e){void 0!==e&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.execute(e)})))},checkRecaptchaLoad:function(){c.call(window,"grecaptcha")&&c.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!m.resolved())throw new Error("ReCAPTCHA has not been loaded")}});"undefined"!=typeof window&&(window.vueRecaptchaApiLoaded=h.notify);var f={components:{VueRecaptcha:{name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!1},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},beforeMount:function(){if(this.loadRecaptchaScript&&!document.getElementById(this.recaptchaScriptId)){var script=document.createElement("script");script.id=this.recaptchaScriptId,script.src="https://"+this.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+this.language,script.async=!0,script.defer=!0,document.head.appendChild(script)}},mounted:function(){var e=this;h.checkRecaptchaLoad();var t=n({},this.$props,{callback:this.emitVerify,"expired-callback":this.emitExpired,"error-callback":this.emitError}),r=this.$slots.default?this.$el.children[0]:this.$el;h.render(r,t,(function(t){e.$widgetId=t,e.$emit("render",t)}))},methods:{reset:function(){h.reset(this.$widgetId)},execute:function(){h.execute(this.$widgetId)},emitVerify:function(e){this.$emit("verify",e)},emitExpired:function(){this.$emit("expired")},emitError:function(){this.$emit("error")}},render:function(e){return e("div",{},this.$slots.default)}}},data:function(){return{mobileNumber:"",pageError:"",showOtp:!1,otpNumber:"",otpPageError:"",captchaToken:"",resend_otp_time:0,sendButton:!1,prevRoute:""}},beforeRouteEnter:function(e,t,r){r((function(e){e.prevRoute=t}))},methods:{registeruser:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var form,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!/^(\+\d{1,3}[- ]?)?\d{10}$/.test(e.mobileNumber)){t.next=25;break}if(""!=e.captchaToken){t.next=5;break}return e.pageError="Error occured, please try reloading your page",t.abrupt("return");case 5:return form={phone:e.mobileNumber,captcha:e.captchaToken},e.resend_otp_time=60,t.next=9,e.$store.dispatch("cartAjax/actCartAjax",{method:"post",url:"/customer/send-otp",params:form});case 9:if(r=t.sent,e.countDownTimer(),!r.success){t.next=18;break}e.showOtp=!0,e.pageError="",e.$toast.open("otp sent to ".concat(e.mobileNumber)),e.$gtm.push({userToken:e.$store.state.list.algolia_user_token,event:"Login",category:"Login",action:"OTP Sent"}),t.next=23;break;case 18:if(r.success||!r.data||1!=r.data.blocked){t.next=22;break}e.pageError=r.message,t.next=23;break;case 22:throw r.message;case 23:t.next=26;break;case 25:e.pageError="Please enter valid mobile number";case 26:t.next=33;break;case 28:t.prev=28,t.t0=t.catch(0),e.pageError="Error occured. Please try reloading and check number",console.log("error from log in page",t.t0),e.$globalError("error from log in page (registeruser)>>>> ".concat(t.t0));case 33:case"end":return t.stop()}}),t,null,[[0,28]])})))()},registeruserOtp:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,form,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=/^\d*(?:\.\d{1,2})?$/,""==e.otpNumber||!e.otpNumber.match(r)){t.next=24;break}return form={},null!=e.$store.state.cartAjax.cart_id&&""!=e.$store.state.cartAjax.cart_id&&(form.cart_id=e.$store.state.cartAjax.cart_id,form.cart_session=e.$store.state.cartAjax.cart_session),form.store=e.$store.state.list.page,form.otp=e.otpNumber,form.phone=e.mobileNumber,t.next=10,e.$store.dispatch("cartAjax/actCartAjax",{method:"post",url:"/customer/validate-otp",params:form});case 10:if(!(o=t.sent).success){t.next=19;break}e.$store.commit("cartAjax/loginPageRoute",{payload:e.prevRoute}),e.$store.commit("cartAjax/registerUser",{payload:o,vm:e}),e.$gtm.push({userToken:e.$store.state.list.algolia_user_token,event:"Login",category:"Login",action:"Login Success"}),e.$gtm.push({userToken:e.$store.state.list.algolia_user_token,event:"Login_status",category:"Login_status",action:"Login Success",Mobile_no:e.mobileNumber,Email:e.$store.state.cartAjax.customerDetail.email}),"/checkout"==e.$route.path&&e.$gtm.push({userToken:e.$store.state.list.algolia_user_token,event:"checkout",action:"Checkout",ecommerce:{checkout:{actionField:{step:2,option:"Shipping Address"},products:e.$store.state.cartAjax.gtm_product}}}),t.next=22;break;case 19:throw e.otpPageError=o.message,e.$gtm.push({userToken:e.$store.state.list.algolia_user_token,event:"Login",category:"Login",action:"Login Failure",label:o.message}),"Error while requesting";case 22:t.next=25;break;case 24:e.otpPageError="please enter valid otp";case 25:t.next=31;break;case 27:t.prev=27,t.t0=t.catch(0),e.$globalError("error from log in page (registeruserOtp) >>>> ".concat(t.t0)),console.log("error from log in page",t.t0);case 31:case"end":return t.stop()}}),t,null,[[0,27]])})))()},recaptchaSuccess:function(e){this.captchaToken=e,this.$store.commit("updatePageLoader",{display:!1},{root:!0})},onExpired:function(){this.captchaToken=""},recaptchaError:function(){this.captchaToken="",this.$toast.error("Google Recaptcha Error. Please contact administration'")},countDownTimer:function(){var e=this;this.resend_otp_time>0&&setTimeout((function(){e.resend_otp_time-=1,e.countDownTimer()}),1e3),2==this.resend_otp_time&&this.$refs.invisibleRecaptcha.execute()}},mounted:function(){""==this.$store.state.cartAjax.customer_id||this.$router.push("/")},watch:{mobileNumber:function(){var e=this;/^(\+\d{1,3}[- ]?)?\d{10}$/.test(this.mobileNumber)?(this.$store.commit("updatePageLoader",{display:!0},{root:!0}),this.$refs.invisibleRecaptcha.execute(),setTimeout((function(){e.sendButton=!0}),1e3)):(this.$refs.invisibleRecaptcha.reset(),this.showOtp=!1,this.pageError="")}}},v=(r(478),r(7)),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("client-only",[r("div",{staticClass:"sign-in-wrapper"},[r("div",{staticClass:"ragester-right-div w-100 p-0"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12"},[r("div",{staticClass:"signin-form-div ragester-content-div p-5",staticStyle:{"max-width":"600px",margin:"0px auto"}},[r("h4",{staticClass:"poppins-semi-bold"},[e._v("Login")]),e._v(" "),r("form",[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"exampleInputEmail1"}},[e._v("Mobile Number*")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.mobileNumber,expression:"mobileNumber",modifiers:{number:!0}}],ref:"mobile_number",staticClass:"form-control",attrs:{type:"text",id:"exampleInputEmail1",placeholder:"Enter your Mobile Number",maxlength:"10"},domProps:{value:e.mobileNumber},on:{input:function(t){t.target.composing||(e.mobileNumber=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),""!=e.pageError?r("span",{staticClass:"input-error"},[e._v(" "+e._s(e.pageError))]):e._e()])]),e._v(" "),e.showOtp?r("div",{staticClass:"col-sm-12"},[r("div",{staticClass:"form-group "},[r("label",{attrs:{for:"exampleInputEmail1"}},[e._v("One Time Password (OTP)*")]),e._v(" "),r("div",{staticClass:"password-show-div"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.otpNumber,expression:"otpNumber"}],staticClass:"form-control",attrs:{type:"text",id:"exampleInputEmail1",placeholder:"****",maxlength:"4"},domProps:{value:e.otpNumber},on:{input:function(t){t.target.composing||(e.otpNumber=t.target.value)}}}),e._v(" "),""!=e.otpPageError?r("span",{staticClass:"input-error"},[e._v(e._s(e.otpPageError))]):e._e(),e._v(" "),e.showOtp?r("div",{staticClass:"resend-otp"},[e.showOtp&&0==this.resend_otp_time?r("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.registeruser()}}},[e._v("Resend OTP")]):r("span",[e._v(" 00:"+e._s(e.resend_otp_time)+" ")])]):e._e()])])]):e._e()])]),e._v(" "),e.showOtp?e.showOtp?r("a",{staticClass:"btn-primary-red mb-0",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.registeruserOtp()}}},[e._v("Continue")]):e._e():r("a",{staticClass:"btn-primary-red mb-0",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.registeruser()}}},[e._v("Continue")])])])])])])]),e._v(" "),r("vue-recaptcha",{ref:"invisibleRecaptcha",attrs:{size:"invisible",sitekey:"6LckEIoaAAAAAMKyBqhUPQfJM5zmL52g7rV3jNgT",loadRecaptchaScript:!0},on:{verify:e.recaptchaSuccess,expired:e.onExpired,error:e.recaptchaError}})],1)],1)}),[],!1,null,"9c5275c6",null);t.default=component.exports}}]);